# 系统文档 - 智膳优选 | AI赋能的智慧食堂管理专家

## —— 基于飞书多维表格和扣子（Coze）的智能解决方案

数据驱动餐饮管理，让每一餐都是营养与经济的完美平衡！

“智膳优选”通过整合飞书与Coze，将数据智能引入校园餐饮管理，旨在帮助学校食堂实现：

- 成本可控：科学核算，精准定价，避免亏损。
- 营养保障：量化标准，智能配餐，均衡健康。
- 高效管理：流程自动，数据驱动，轻松决策。
- 运营透明：过程记录，结果可溯，便于监督。

最终目标是推动学校食堂向“公益优先、成本可控、营养健康、运营智能”的新模式转型，让每一餐都成为营养与经济的完美平衡，切实保障广大师生的饮食权益。

---

🌻 若您对飞书文档的风格不甚满意，欢迎访问我们精心设计的GitBook文档页面，或许能为您提供更舒适的阅读体验：[https://mealoptima.gitbook.io/](https://mealoptima.gitbook.io/)

---

## 🌟 项目背景

随着我国教育事业的快速发展，学校在校就餐人数持续增长，已形成以午餐为主体，部分学校延伸提供早餐、晚餐及课间加餐的多元化供餐体系。在服务规模不断扩大的背景下，现行食堂成本核算与定价管理模式已显现出与新时期发展需求不相适应的突出问题：

1. 定价机制科学性不足：现行定价标准尚未建立与运营成本动态关联的科学模型，主要依赖历史定价和横向参考周边学校的粗放式管理模式。这种机制导致各校食堂运营呈现两极分化态势：部分单位因定价虚高形成资金沉淀，另一些单位则因定价偏低陷入持续亏损，严重制约食堂服务的可持续发展。
2. 营养均衡与成本控制难以兼顾：如何在保障学生营养健康的前提下，有效控制成本，并根据市场变化灵活调整配餐方案，是当前学校食堂面临的巨大挑战。传统的排餐方式往往依赖经验，难以精确量化营养和成本，无法实现最优化。
3. 管理效率低下与监督不足：手动进行成本核算、排餐制定、数据分析等工作耗时耗力，且容易出错。同时，缺乏透明、高效的监督机制，难以保障食堂运营的规范性。
上述管理短板已对学校餐饮服务质量提升、财政资金规范使用以及师生权益保障形成系统性制约。建立科学规范、数据驱动的成本核算与智能排餐体系，已成为推进教育后勤服务现代化、实现食堂运营可持续发展的当务之急。

“智膳优选” 应运而生，旨在利用飞书多维表格的强大数据管理能力和扣子（Coze）平台的智能算法与AI评估能力，构建一套AI赋能的智慧食堂管理解决方案，解决上述痛点，实现营养、成本与效率的平衡。

## ✅ 优势与价值

“智膳优选”解决方案基于飞书多维表格和扣子（Coze）平台，具备以下核心优势与价值：

1. 科学定价与成本精算：

- 精准成本核算：系统化管理菜品 (01-菜品管理)、原料 (03-原料管理) 及配料清单 (02-配料清单)，自动计算每道菜品的直接成本。
- 灵活间接成本分摊：支持按销量、时间的方式分摊水电、人工等间接成本 (04-间接成本)，确保成本核算的全面性与准确性。
- 动态智能定价：根据目标利润率 (07-系统配置) 自动计算建议售价，同时支持手动调价，确保食堂在公益性与可持续经营之间取得平衡。

2. 营养均衡与智能配餐：

- 量化营养管理：基于权威食物成分数据库 (03-原料管理)，精确计算每道菜品及每餐的宏量营养素含量。
- 标准化营养指导：内置可配置的每餐及每日营养摄入标准 (06-营养标准-每餐, 95-营养标准-每日)，为智能排餐提供科学依据。
- AI优化排餐：利用在Coze平台搭建的智能算法，综合考虑营养需求 (营养权重, 营养素偏差比例)、成本预算 (每日餐标, 餐标浮动比例)、菜品多样性 (菜品最小重复天数, 多样性权重) 及口味偏好（未来可拓展）等多重因素，自动生成未来多日 (配餐天数) 的优化配餐方案 (08-排餐方案)。
- AI智能评估：Coze可对生成的菜谱进行智能评估，确保方案的合理性。

3. 数据驱动与高效管理：

- 结构化数据管理：所有数据（菜品、原料、成本、配置、排餐方案等）均存储于飞书多维表格，结构清晰，易于管理和追溯。
- 自动化流程：通过飞书自动化 (99-智能菜单生成) 一键触发Coze工作流，自动完成排餐方案的生成与存储，极大提升工作效率。
- 可视化分析与决策支持：沉淀的菜品数据可对接飞书仪表盘 (100-数据分析)或专业BI工具（Tableau），进行多维度、可视化的数据分析，为食堂管理者提供直观的决策依据，持续优化菜品搭配和餐厅运营。

4. 透明公开与强化监督：

- 过程透明可追溯：排餐方案的生成逻辑（配置参数）与结果 (08-排餐方案) 均有记录，便于核查与监督。
- 日志记录完整：自动化流程的执行日志 (11-排餐方案-生成日志) 提供完整的操作记录，确保系统运行的公开透明。

## 😃 为什么选择飞书和Coze？

“智膳优选”项目的成功实施，依赖于强大的数据管理能力和先进的智能算法引擎。飞书多维表格和扣子（Coze）平台的组合，为我们提供了理想的技术基础：

1. 飞书多维表格：灵活的数据基座与协作中心

- 强大的结构化数据管理： 飞书多维表格提供了远超传统电子表格的灵活性，能够轻松构建复杂数据模型，支持丰富的字段类型、视图和关联关系，完美契合食堂管理的多样化数据需求。
- 无缝的自动化与集成： 飞书平台内置的自动化引擎，可以方便地创建如 99-智能菜单生成 这样的自动化流程。如 meal_planner_lark_bit_ext/src/register.ts 所示，我们可以通过飞书自动化动作触发外部服务（如Coze工作流），并将结果回写到多维表格，实现业务流程的闭环自动化。其开放的API (lark-oapi SDK) 也保证了与外部系统的良好集成能力。
- 便捷的协作与可视化： 基于飞书的协作环境，食堂管理人员可以方便地共同维护数据。结合飞书仪表盘 (100-数据分析)，可以将运营数据进行可视化呈现，辅助管理决策。

2. 扣子（Coze）：智能算法引擎与AI能力平台

- 强大的AI工作流编排： Coze 提供了可视化的工作流编辑器，能够方便地编排、部署和运行包含复杂逻辑和AI能力的自动化流程。本项目核心的智能排餐算法 (meal_planner_lib.meal_planner 模块) 正是通过Coze工作流来执行和管理的。
- 易于集成的AI能力： Coze平台封装了多种AI能力，包括大语言模型等，可用于实现菜谱的智能评估、优化建议等高级功能，提升排餐方案的科学性和合理性。
- 安全可靠的API调用： Coze提供了标准的API接口和安全的认证机制（如 register.ts 中处理的JWT和OAuth Access Token），使得飞书自动化能够安全、稳定地调用其智能排餐服务。

飞书多维表格提供了结构化、易管理、可自动化的数据基础和用户交互界面，而Coze则提供了强大的智能算法执行环境和AI能力支持。二者的结合，使得“智膳优选”能够高效地处理复杂的食堂运营数据，并利用AI技术生成科学、合理、经济的排餐方案，与项目初衷完美契合。

## 🌈 后续规划

为了持续提升“智膳优选”系统的智能水平和用户体验，我们规划了以下几个方面的发展方向：

1. **引入食物搭配宜忌，优化配餐评分：**
    - 在当前的配餐算法基础上，进一步研究和整合食物相宜相克的知识库。
    - 优化配餐得分计算函数，将食物搭配的合理性纳入评分体系。
2. **采用混合优化算法，提升排餐质量：**
    - 探索更先进的混合排餐算法策略，以应对更复杂的约束和优化目标。
    - 计划结合 **遗传算法** 进行全局搜索，寻找更优的整体配餐方案组合；利用 **动态规划** 精确处理多日营养目标的累积与平衡；使用 **贪心算法** 快速生成高质量的初始解，提高算法效率和方案质量。
3. **扩展营养素考量范围，实现更全面的营养管理：**
    - 目前系统主要关注能量和宏量营养素（蛋白质、脂肪、碳水化合物）。
    - 未来计划引入 **微量营养素**（如维生素、矿物质等）的计算与优化，依赖更全面的食物成分数据，生成更加精细化、更符合全面营养需求的配餐方案。
4. **整合飞书低代码平台，增强系统扩展性：**
    - 探索将飞书多维表格与飞书低代码平台进行深度结合。
    - 利用低代码平台构建更丰富的用户交互界面、定制化的审批流程或与其他校内系统（如库存管理、采购系统）的集成，进一步提升系统的易用性和业务覆盖范围。
5. **完善数据分析与可视化，赋能精细化运营：**
    - 充分利用飞书多维表格的“仪表盘”功能 (`100-数据分析`)，设计和开发更多维度的可视化分析报告，例如菜品销售趋势分析、成本利润动态监控、学生营养摄入状况评估等，为食堂管理者提供更深入的数据洞察。
